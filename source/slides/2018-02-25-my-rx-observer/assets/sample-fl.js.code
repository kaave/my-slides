import { Observable } from 'rxjs/Observable';

import '../add/sequencer';

Observable.sequencer({
  bpm: 128,
  pattern: `
x---x---x--x--x-
x-x-x-x-xx-x----
x---x---x--x--x-
x-x-x-x-xx-x----
`,
  /** ヨレっぷりをプログラミング */
  quantize(index: number, msec: number) {
    const beatIndex = index % 16;
    if (beatIndex === 8) {
      return msec * -0.1;
    }

    return 0;
  },
}).subscribe(index => console.log(new Date(), index));
